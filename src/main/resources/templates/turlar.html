<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Turlarımız | XVIA</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    
    <style>
        .card-img-wrapper { height: 250px; overflow: hidden; position: relative; }
        .card-img-top { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s ease; }
        .card:hover .card-img-top { transform: scale(1.1); }
        .fiyat-etiketi {
            position: absolute; bottom: 0; right: 0;
            background: #ffc107; color: #000;
            padding: 8px 15px; font-weight: bold;
            border-top-left-radius: 15px;
            box-shadow: -2px -2px 10px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>

    <div th:replace="~{fragments/layout :: navbar}"></div>

    <div class="container my-5">
        
        <div class="row align-items-center mb-5">
            <div class="col-md-4">
                <h2 class="fw-bold text-dark border-start border-5 border-warning ps-3">Özel Rotalar</h2>
            </div>
            <div class="col-md-4">
                <form action="/turlar" method="GET" class="d-flex shadow-sm rounded-pill overflow-hidden border bg-white">
                    <input type="text" name="kelime" class="form-control border-0 px-4" 
                           placeholder="Tur adı ara (Örn: İtalya)..." th:value="${arananKelime}">
                    <button type="submit" class="btn btn-warning text-dark fw-bold px-4">ARA</button>
                </form>
            </div>
            <div class="col-md-4 text-end">
                <a href="/turlar/ekle" 
                   th:if="${session.kullanici != null and session.kullanici.calisanTipi == 'YONETICI'}"
                   class="btn btn-success rounded-pill px-4 shadow hover-scale">
                    <i class="fa-solid fa-plus me-2"></i>Tur Ekle
                </a>
            </div>
        </div>

        <div class="row g-4">
            <div class="col-md-4" th:each="tur : ${listemiz}">
                <div class="card border-0 shadow h-100 overflow-hidden">
                    
                    <div class="card-img-wrapper">
                        <img th:src="${tur.resimUrl != null && tur.resimUrl != '' ? tur.resimUrl : 'https://picsum.photos/seed/'+ tur.turId +'/600/400'}" 
                             class="card-img-top" 
                            alt="Tur Görseli"
                            style="height: 250px; object-fit: cover;"
                             onerror="this.onerror=null;this.src='https://via.placeholder.com/600x400?text=Gorsel+Yok';">
                        
                        <div class="fiyat-etiketi" th:text="${tur.baslangicFiyati} + ' TL'"></div>
                    </div>

                    <div class="card-body">
                        <div class="d-flex justify-content-between text-muted small mb-2">
                            <span><i class="fa-regular fa-calendar me-1"></i> <span th:text="${tur.sureGun}"></span> Gün</span>
                            <span><i class="fa-solid fa-user-group me-1"></i> <span th:text="${tur.kontenjan}"></span> Kişi</span>
                        </div>
                        <h4 class="card-title fw-bold" style="color: #003366;" th:text="${tur.turAdi}">Tur Adı</h4>
                        <p class="card-text text-secondary small" th:text="${tur.aciklama}">Açıklama...</p>
                    </div>

                    <div class="card-footer bg-white border-0 pb-4 pt-0 d-flex gap-2"
                         th:if="${session.kullanici != null and session.kullanici.calisanTipi == 'YONETICI'}">
                        <a th:href="@{/turlar/duzenle/{id}(id=${tur.turId})}" class="btn btn-outline-warning flex-grow-1 rounded-pill fw-bold text-dark">
                            <i class="fa-solid fa-pen-to-square me-1"></i> Düzenle
                        </a>
                        <a th:href="@{/turlar/sil/{id}(id=${tur.turId})}" 
                           onclick="return confirm('Bu turu silmek istediğinize emin misiniz?')" 
                           class="btn btn-outline-danger rounded-circle">
                            <i class="fa-solid fa-trash"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>