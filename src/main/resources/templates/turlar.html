<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Turlar | XVIA</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <style>
        .card-img-wrapper { height: 250px; overflow: hidden; position: relative; }
        .card-img-top { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s ease; }
        .card:hover .card-img-top { transform: scale(1.1); }
        .fiyat-etiketi { position: absolute; bottom: 0; right: 0; background: #ffc107; color: #000; padding: 8px 15px; font-weight: bold; border-top-left-radius: 15px; }
    </style>
</head>
<body>
    <div th:replace="~{fragments/layout :: navbar}"></div>
    <div class="container my-5">
        <div class="row align-items-center mb-5">
            <div class="col-md-4"><h2 class="fw-bold text-dark border-start border-5 border-warning ps-3">Özel Rotalar</h2></div>
            <div class="col-md-4">
                <form action="/turlar" method="GET" class="d-flex shadow-sm rounded-pill border bg-white">
                    <input type="text" name="kelime" class="form-control border-0 px-4" placeholder="Tur ara..." th:value="${arananKelime}">
                    <button type="submit" class="btn btn-warning fw-bold px-4">ARA</button>
                </form>
            </div>
            <div class="col-md-4 text-end">
                <a href="/turlar/ekle" th:if="${session.kullanici != null and session.kullanici.calisanTipi == 'YONETICI'}" class="btn btn-success rounded-pill px-4 shadow"><i class="fa-solid fa-plus me-2"></i>Tur Ekle</a>
            </div>
        </div>
        <div class="row g-4">
            <div class="col-md-4" th:each="tur : ${listemiz}">
                <div class="card border-0 shadow h-100 overflow-hidden">
                    <div class="card-img-wrapper">
                        <img th:src="${tur.resimUrl != null && tur.resimUrl != '' ? tur.resimUrl : 'https://source.unsplash.com/600x400/?' + #strings.replace(tur.turAdi, ' ', ',')}" 
                             class="card-img-top" onerror="this.src='https://via.placeholder.com/600x400'">
                        <div class="fiyat-etiketi" th:text="'$' + ${tur.baslangicFiyati}"></div>
                    </div>
                    <div class="card-body">
                        <div class="d-flex justify-content-between text-muted small mb-2">
                            <span><i class="fa-regular fa-calendar"></i> <span th:text="${tur.sureGun}"></span> Gün</span>
                            <span><i class="fa-solid fa-users"></i> <span th:text="${tur.kontenjan}"></span> Kişi</span>
                        </div>
                        <h4 class="card-title fw-bold" style="color: #003366;" th:text="${tur.turAdi}"></h4>
                        <p class="card-text small text-muted" th:text="${tur.aciklama}"></p>
                    </div>
                    <div class="card-footer bg-white border-0 pb-3" th:if="${session.kullanici != null and session.kullanici.calisanTipi == 'YONETICI'}">
                        <a th:href="@{/turlar/duzenle/{id}(id=${tur.turId})}" class="btn btn-outline-warning w-100 mb-2">Düzenle</a>
                        <a th:href="@{/turlar/sil/{id}(id=${tur.turId})}" onclick="return confirm('Silinsin mi?')" class="btn btn-outline-danger w-100">Sil</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>